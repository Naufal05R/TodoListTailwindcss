const books=[],RENDER_EVENT="render-book",SAVED_EVENT="saved-book",STORAGE_KEY="APP_KEY";function resetForm(){const inputForm=document.querySelectorAll("form > div:nth-child(-n+3) > input"),checkForm=document.querySelector("#isread");for(item in inputForm)inputForm[item].value="";checkForm.checked=!1,document.dispatchEvent(new Event(RENDER_EVENT)),saveData()}function addBook(){const booksTitle=document.getElementById("title").value,booksAuthor=document.getElementById("author").value,publicationYear=document.getElementById("year").value,isRead=document.getElementById("isread").checked,generatedID=generateId(),bookObject=generateBookObject(generatedID,booksTitle,booksAuthor,publicationYear,isRead);books.push(bookObject),document.dispatchEvent(new Event(RENDER_EVENT)),saveData()}function generateId(){return+new Date}function generateBookObject(id,title,author,year,isRead){return{id:id,title:title,author:author,year:year,isRead:isRead}}function displayBook(bookObject){const booksTitle=document.createElement("h5");booksTitle.classList.add("text-neutral-100","py-2","font-bold","text-xl"),booksTitle.innerText=bookObject.title;const booksAuthor=document.createElement("h6");booksAuthor.classList.add("text-neutral-100","font-normal","text-xl"),booksAuthor.innerText=bookObject.author;const publicationYear=document.createElement("p");publicationYear.classList.add("text-neutral-200","py-2","font-normal","text-base"),publicationYear.innerText=bookObject.year;const bookContainer=document.createElement("div");bookContainer.classList.add("flex","flex-col","px-2"),bookContainer.append(booksTitle,booksAuthor,publicationYear);const container=document.createElement("article");if(container.classList.add("flex","w-full","mx-auto","bg-opacity-40","gap-x-2","backdrop-blur-sm","bg-slate-400","rounded-md"),container.append(bookContainer),container.setAttribute("id",`book-${bookObject.id}`),bookObject.isRead){const undo=document.createElement("i");undo.classList.add("bx","bx-undo","bx-sm","bx-border-circle","border-none","bx-flashing-hover","text-white");const undoButton=document.createElement("button");undoButton.classList.add("ml-auto","bg-sky-500","hover:bg-opacity-50","bg-opacity-80","h-full","my-auto","rounded-full"),undoButton.append(undo),undoButton.addEventListener("click",()=>{undoBookFromRead(bookObject.id)});const trash=document.createElement("i");trash.classList.add("bx","bx-trash","bx-sm","bx-border-circle","border-none","bx-flashing-hover","text-white");const trashButton=document.createElement("button");trashButton.classList.add("mr-4","bg-rose-500","hover:bg-opacity-50","bg-opacity-80","h-full","my-auto","rounded-full"),trashButton.append(trash),trashButton.addEventListener("click",()=>{removeBookFromRead(bookObject.id)}),container.append(undoButton,trashButton)}else{const check=document.createElement("i");check.classList.add("bx","bx-check","bx-sm","bx-border-circle","border-none","bx-flashing-hover","text-white");const checkButton=document.createElement("button");checkButton.classList.add("ml-auto","bg-sky-500","hover:bg-opacity-50","bg-opacity-80","h-full","my-auto","rounded-full"),checkButton.append(check),checkButton.addEventListener("click",()=>{addBookToRead(bookObject.id)});const trash=document.createElement("i");trash.classList.add("bx","bx-trash","bx-sm","bx-border-circle","border-none","bx-flashing-hover","text-white");const trashButton=document.createElement("button");trashButton.classList.add("mr-4","bg-rose-500","hover:bg-opacity-50","bg-opacity-80","h-full","my-auto","rounded-full"),trashButton.append(trash),trashButton.addEventListener("click",()=>{removeBookFromRead(bookObject.id)}),container.append(checkButton,trashButton)}return container}function findBook(bookId){for(const bookItem of books)if(bookItem.id==bookId)return bookItem;return null}function findBookIndex(bookId){for(const index in books)if(books[index].id===bookId)return index;return-1}function addBookToRead(bookId){const bookTarget=findBook(bookId);null!=bookTarget&&(bookTarget.isRead=!0,document.dispatchEvent(new Event(RENDER_EVENT)),saveData())}function undoBookFromRead(bookId){const bookTarget=findBook(bookId);null!=bookTarget&&(bookTarget.isRead=!1,document.dispatchEvent(new Event(RENDER_EVENT)),saveData())}function removeBookFromRead(bookId){const bookTarget=findBookIndex(bookId);-1!==bookTarget&&(books.splice(bookTarget,1),document.dispatchEvent(new Event(RENDER_EVENT)),saveData())}function saveData(){if(isStorageExist()){const parsed=JSON.stringify(books);localStorage.setItem("APP_KEY",parsed),document.dispatchEvent(new Event(SAVED_EVENT))}}function isStorageExist(){return void 0!==typeof Storage||(alert("Browser kamu tidak mendukung local storage"),!1)}function loadDataFromStorage(){const serializedData=localStorage.getItem("APP_KEY");let data=JSON.parse(serializedData);if(null!==data)for(const book of data)books.push(book);document.dispatchEvent(new Event(RENDER_EVENT))}window.addEventListener("DOMContentLoaded",()=>{const submitForm=document.getElementById("form");submitForm.addEventListener("submit",()=>{addBook()}),isStorageExist()&&loadDataFromStorage()}),document.addEventListener(RENDER_EVENT,(function(){const unreadBookList=document.getElementById("uncompleted-books");unreadBookList.innerHTML="";const unreadTagline=document.createElement("h5");unreadTagline.classList.add("py-2","px-4","mb-4","text-lg","font-bold","bg-sky-500","text-white","rounded-md","text-start","w-fit"),unreadTagline.innerText="Buku belum dibaca",unreadBookList.appendChild(unreadTagline);const readBookList=document.getElementById("completed-books");readBookList.innerHTML="";const readTagline=document.createElement("h5");readTagline.classList.add("py-2","px-4","mb-4","text-lg","font-bold","bg-sky-500","text-white","rounded-md","text-start","w-fit"),readTagline.innerText="Buku belum dibaca",readBookList.appendChild(readTagline);for(const bookItem of books){const bookElement=displayBook(bookItem);bookItem.isRead?readBookList.append(bookElement):unreadBookList.append(bookElement)}})),document.addEventListener(SAVED_EVENT,()=>{console.log(localStorage.getItem("APP_KEY"))});